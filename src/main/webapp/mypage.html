<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>마이페이지</title>	

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  	<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  	<script type="text/javascript" src="./slick/slick.min.js"></script>
  	
  	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="./slick/slick.css"/>
	<link rel="stylesheet" type="text/css" href="./slick/slick-theme.css"/>
	<link rel="stylesheet" type="text/css" href="./css/mypage/mypage-section.css" />
	<link rel="stylesheet" type="text/css" href="./css/mypage/mypage-review.css" />
	<style>
	.star-checkbox {
      display: none; /* 기본 체크박스 숨김 */
    }

    .star-label {
      font-size: 20px;
      color: gray;
      cursor: pointer;
      user-select: none;
      transition: color 0.2s;
      float: right;
    }

    .star-checkbox:checked + .star-label {
      content: '★';
      color: gold;
    }

    .star-label::before {
      content: '';
    }

    .star-checkbox:checked + .star-label::before {
      content: '★';
    }
    
    footer {
    	margin-top: 25px;
    }
	</style>
	
	<style>
	@font-face {
	    font-family: 'Pretendard-Regular';
	    src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
	    font-weight: 400;
	    font-style: normal;
	}
	
	.section-container {
	    font-family: 'Pretendard-Regular', sans-serif;
	}
</style>
</head>
<body>
	<!-- Header -->
	<div id="header-container"></div>
	<!-- section -->
	<div id="section" class="section-container">
		<div id="info" class="section-component">
			<h5 class="component-title">내 정보</h5>
			<form>
				<div class="info-component">
					<div class="info-group">
						<label for="nick">닉네임</label>
						<input type="text" name="nick" id="nick" value="서울게하주인" readonly=true/>				
					</div>
					<div class="info-group">
						<label>이름</label>
						<input type="text" name="name" id="name" value="김주인" />
					</div>
					<div  class="info-group">
						<label>전화번호</label>
						<input type="text" name="number" id="number" value="010-1234-5678" />
					</div>
					<div  class="info-group">
						<label>생년월일</label>
						<input type="date" name="birthday" id="birthday" value="1999-01-01" />
					</div>
					<div  class="info-group">
						<label>성별</label>
						<input type="type" name="gender" id="gender" value="남성" />
					</div>
					<div>
						<button id="btn-info" class="btn btn-danger">저장</button> 
					</div>
				</div>
				
			</form>
		</div>
		
		<div id="discount" class="discount">
			<div id="discount-point" class="discount-component">
				<div class="component-header">
					<h5  class="component-title">포인트</h5>
					<a href="#">더보기 ></a>
				</div>	
				<div id="discount-point-amount">
					<h5>5,730p</h5>
					<p>이번 달 내 소멸될 포인트 1,000 P</p>
				</div>
			</div>
			<div id="discount-coupon" class="discount-component">
				<div class="component-header">
					<h5 class="component-title">할인 쿠폰</h5>
					<a href="#">더보기 ></a>
				</div>	
				<div class="discount-coupon-list">
					<h4>5000원 할인</h4>
					<a href="#">지금 사용하기 ></a>
				</div>
				<div class="discount-coupon-list">
					<h4>숙박 15% 할인</h4>
					<a href="#">지금 사용하기 ></a>
				</div>
			</div>
		</div>
		
		<div id="res" class="section-component">
			<div class="component-header">
				<h5 class="component-title">예약목록 조회</h5>
				<a href="#">더보기 ></a>
			</div>	
			<div id="res-list">				
				<div class="res-component card">
					<a href="#expand-1" class="collapsed res-list" data-toggle="collapse" aria-expanded="false" aria-controls="collapse3">
						<span>12345-67890</span>
						<img class="res-component-img" src="./img/mypage/img01-01.png" alt="guesthouse thumbnail">
						<span>별자리 여관</span>
						<span>2025-07-13</span>
						<span>2025-07-16</span>
						<span>99,000원</span>						
					</a>
					<div id="expand-1" class="expand res-expand-detail collapse" aria-labelledby="heading3" data-parent="#res">
						<div class="res-expand-content">
							<div class="res-expand-img">
								<img alt="" src="./img/mypage/img01-01.png"">
							</div>
							<div class="res-expand-text">
								<p><b>예약일자</b>: 2025-06-20</p>
								<p><b>게스트하우스 명</b>: 별자리 여관</p>
								<p><b>체크인</b>: 2025-07-13    <b>체크아웃</b>: 2025-07-16</p>
								<p><b>숙박인원</b>: 5명</p>
								<p><b>결제방법</b>: 카카오페이</p>
								<p><b>결제금액</b>: 99,000원</p>
							</div>
						</div>
						<div class="res-button">
							<button type="button" class="btn btn-danger btn-cancel">예약취소</button>
							<button type="button" class="btn btn-secondary btn-review" data-toggle="modal" data-target="#reviewModal">리뷰쓰기</button>
						</div>
					</div>		
				</div>	

				<div class="res-component card">
					<a href="#expand-2" class="collapsed res-list" data-toggle="collapse" aria-expanded="false" aria-controls="collapse3">
						<span>98787-12342</span>
						<img class="res-component-img" src="./img/mypage/img02-01.png" alt="guesthouse thumbnail">
						<span>어떤하루</span>
						<span>2025-06-21 </span>
						<span>2025-06-23</span>
						<span>73,000원</span>
					</a>
					<div id="expand-2" class="expand res-expand-detail collapse" aria-labelledby="heading3" data-parent="#res">
						<div class="res-expand-content">
							<div class="res-expand-img">
								<img alt="" src="./img/mypage/img02-01.png">
							</div>
							<div class="res-expand-text">
								<p><b>예약일자</b>: 2025-06-20</p>
								<p><b>게스트하우스 명</b>: 어떤하루</p>
								<p><b>체크인</b>: 2025-06-21    <b>체크아웃</b>: 2025-06-23</p>
								<p><b>숙박인원</b>: 5명</p>
								<p><b>결제방법</b>: 카카오페이</p>
								<p><b>결제금액</b>: 73,000원</p>
							</div>
						</div>
						<div class="res-button">
							<button type="button" class="btn btn-danger btn-cancel">예약취소</button>
							<button type="button" class="btn btn-secondary btn-review" data-toggle="modal" data-target="#reviewModal">리뷰쓰기</button>
						</div>						
						
					</div>		
				</div>	

				<div class="res-component card">
					<a href="#expand-3" class="collapsed res-list" data-toggle="collapse" aria-expanded="false" aria-controls="collapse3">
						<span>12334-90734</span>
						<img class="res-component-img" src="./img/mypage/img03-01.png" alt="guesthouse thumbnail">
						<span>어울림하우스</span>
						<span>2025-05-05</span>
						<span>2025-05-08</span>
						<span>60,000원</span>
					</a>
					<div id="expand-3" class="expand res-expand-detail collapse" aria-labelledby="heading3" data-parent="#res">
						<div class="res-expand-content">
							<div class="res-expand-img">
								<img alt="" src="./img/mypage/img03-01.png">
							</div>
							<div class="res-expand-text">
								<p><b>예약일자</b>: 2025-06-20</p>
								<p><b>게스트하우스 명</b>: 어울림하우스</p>
								<p><b>체크인</b>: 2025-05-05    <b>체크아웃</b>: 2025-05-08</p>
								<p><b>숙박인원</b>: 3명</p>
								<p><b>결제방법</b>: 신용카드</p>
								<p><b>결제금액</b>: 60,000원</p>
							</div>
						</div>
						<div class="res-button">
							<button type="button" class="btn btn-danger btn-cancel">예약취소</button>
							<button type="button" class="btn btn-secondary btn-review" data-toggle="modal" data-target="#reviewModal">리뷰쓰기</button>
						</div>
					</div>		
				</div>		

			</div>
		</div>
		
		<div id="review" class="section-component review-container">
			<div class="component-header">
				<h5 class="component-title">내가 쓴 리뷰</h5>
				<a href="#">더보기 ></a>
			</div>			
			<div id="review-list" class="review-list">								
				<div class="review-component">
					<div class="review-header">
						<p class="review-star">★★★★★</p>
						<p class="review-date">24일 전</p>
						<div style="flex-grow: 2;"></div>
						<button type="button" class="btn-detail" data-toggle="modal" data-target="#detailModal">상세보기</button>
					</div>
					<div class="review-img-list">
						<img class="review-component-img" alt="" src="./img/mypage/img01-01.png">
						<img class="review-component-img" alt="" src="./img/mypage/img01-02.png">
						<img class="review-component-img" alt="" src="./img/mypage/img01-03.png">
					</div>					
					<p class="review-location">별자리 여관</p>
					<p class="review-content">
					체크인부터 체크아웃까지 모든 과정이 매끄럽고 기분 좋았습니다. 
					숙소는 사진보다 더 아늑했고, 침구류도 뽀송뽀송해서 숙면을 취할 수 있었어요. 
					공용 공간도 잘 관리되어 있었고, 특히 주방에서 간단하게 아침을 해먹을 수 있어 좋았습니다. 
					무엇보다 인상 깊었던 건 호스트의 따뜻한 환대였습니다. 
					여행 일정 중간에 작은 도움이 필요했을 때도 친절하게 응대해주셔서 감사했어요. 
					친구에게도 추천하고 싶은 숙소입니다!
					</p>			
				</div>
				<div class="review-component">
					<div class="review-header">
						<p class="review-star">★★★★★</p>
						<p class="review-date">3달 전</p>
						<div style="flex-grow: 2;"></div>
						<button type="button" class="btn-detail" data-toggle="modal" data-target="#detailModal2">상세보기</button>
					</div>					
					<div class="review-img-list">
						<img class="review-component-img" alt="" src="./img/mypage/img04-01.png">
						<img class="review-component-img" alt="" src="./img/mypage/img04-02.png">
						<img class="review-component-img" alt="" src="./img/mypage/img04-03.png">
					</div>					
					<p class="review-location">자연별장</p>
					<p class="review-content">
					이번 여행에서 가장 만족스러웠던 건 바로 이 게스트하우스였습니다. 
					위치도 관광지와 가까워서 이동이 편했고, 무엇보다 숙소가 정말 청결해서 기분 좋게 머물 수 있었습니다. 
					방 안에 은은한 조명이 분위기를 더해줘서 하루 종일 돌아다닌 뒤 편안히 쉴 수 있었어요. 
					호스트 분도 정말 친절하셔서 근처 맛집과 숨은 명소도 추천해주셨고, 그 덕분에 여행의 질이 한층 높아졌습니다. 
					다음에 다시 이 지역에 오게 된다면 무조건 재방문할 예정이에요!
					</p>			
				</div>
			</div>
		</div>
		
		<div id="fav" class="section-component">
			<div class="component-header">
				<h5 class="component-title">나의 즐겨찾기</h5>
				<a href="#">더보기 ></a>
			</div>	
			<div id="fav-list" class="fav-list">								
				<div class="fav-component carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
					<div class="carousel-inner">
		                <div class="carousel-item active">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img01-01.png">
		                </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img01-02.png">
		                   </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img01-03.png">
		                </div>
		            </div>
					<div class="fav-content">
						<p class="fav-title" style="margin-top: 20px;">별자리 여관</p>
						<p class="fav-addr">위치: 서울특별시 마포구 새별로 123</p>
						<div style="display: flex; justify-content: space-between;">
							<p class="fav-price">50,000원 ~</p>
							<button class="favorite-btn active">
								<i class="fas fa-star"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="fav-component carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
					<div class="carousel-inner">
		                <div class="carousel-item active">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img02-01.png">
		                </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img02-02.png">
		                   </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img02-03.png">
		                </div>
		            </div>
					<div class="fav-content">
						<p class="fav-title" style="margin-top: 20px;">어떤하루</p>
						<p class="fav-addr">위치: 강원도 춘천시 소양강로 321</p>
						<div style="display: flex; justify-content: space-between;">
							<p class="fav-price">70,000원 ~</p>
							<button class="favorite-btn active">
								<i class="fas fa-star"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="fav-component carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
					<div class="carousel-inner">
		                <div class="carousel-item active">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img03-01.png">
		                </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img03-02.png">
		                   </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img03-03.png">
		                </div>
		            </div>
					<div class="fav-content">
						<p class="fav-title" style="margin-top: 20px;">어울림하우스</p>
						<p class="fav-addr">위치: 대전광역시 유성구 과학로 89</p>
						<div style="display: flex; justify-content: space-between;">
							<p class="fav-price">30,000원 ~</p>
							<button class="favorite-btn active">
								<i class="fas fa-star"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="fav-component carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
					<div class="carousel-inner">
		                <div class="carousel-item active">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img04-01.png">
		                </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img04-02.png">
		                   </div>
		                <div class="carousel-item">
		                    <img class="fav-component-img" alt="" src="./img/mypage/img04-03.png">
		                </div>
		            </div>
					<div class="fav-content">
						<p class="fav-title" style="margin-top: 20px;">자연별장</p>
						<p class="fav-addr">위치: 경기도 성남시 분당구 미래로 77</p>
						<div style="display: flex; justify-content: space-between;">
							<p class="fav-price">55,000원 ~</p>
							<button class="favorite-btn active">
								<i class="fas fa-star"></i>
							</button>
						</div>
					</div> 
				</div>
			</div>
		</div>
	
		<!-- 최근에 본 게스트하우스 목록 -->
		<div id="recent" class="section-component">
			<div class="component-header">
				<h5 class="component-title">최근 본 게스트하우스</h5>
			</div>	
			
			<div id="recent-list" class="recent-list">
										
				<div class="recent-component">
		            <img class="recent-component-img" alt="" src="./img/mypage/img01-01.png">
					<div class="recent-content">
						<p class="recent-title" style="margin-top: 10px;">별자리 여관</p>
						<button class="favorite-btn">
							<i class="far fa-star"></i>
						</button>
					</div>
				</div>
				
			</div>
		</div>
	</div>	
	
	<!-- modal -->
	<div id="modal-placeholder">
		
	</div>
	<div id="review-modal-placeholder">
		
	</div>
	<div id="review-modal-placeholder2">
		
	</div>
	
	<!-- footer -->
	<div id="footer-container">
	</div>
	<!-- slick 관련 코드 -->
	<script type="text/javascript">
	$('.fav-list').slick({
  		infinite: true,
  		slidesToShow: 3,
  		slidesToScroll: 1,
  	  	variableWidth: true,
  	  	autoplay: true,
  	  	autoplaySpeed: 3000,
	});	

	</script>

	<!-- 헤더 + 사용자 정보 관련 코드 -->
	<script>
	$(() => {
		$("#header-container").load("./header/header.html", function () {
		      const username = localStorage.getItem("loggedInUser");
		      if (username) {
		        $(".username").text(`${username}님`);
		      }
		    });
	});
	</script>
	
	<!-- 모달 관련 코드 -->
	<script>
	$(document).ready(function() {
        $("#modal-placeholder").load("./html/mypage/write-review-modal.html");
        $("#review-modal-placeholder").load("./html/mypage/my-review-modal.html");
        $("#review-modal-placeholder2").load("./html/mypage/my-review-modal2.html");
    });
	</script>
	
	<!-- 리뷰 목록 slick 관련 코드 -->
	<script>
	$(document).ready(function() {
		// 리뷰 목록 slick
        $("#review-list").slick({
        	dots: true,
        	infinite: true,
        	speed: 300,
        	variableWidth: true,
        });
        
		// 리뷰 내부에 이미지 slick
        $('.review-img-list').slick({
        	  dots: false,
        	  infinite: true,
        	  speed: 300,
        	  slidesToShow: 1,
        	  variableWidth: true,
        });
    });
	</script>
	
	<script>
	$("#footer-container").load("./footer/footer.html");
	</script>
	
	<script>
	$('.favorite-btn').click(function() {
		const icon = $(this).find('i');
		icon.toggleClass('far').toggleClass('fas');
		$(this).toggleClass('active');
	});
	</script>
	
	<!-- localStorage 관련 코드 -->
	<script>
	$(() => {
  	 	// 사용자 정보 불러오기
	    const nickForm = document.querySelector('#nick');
		const nameForm = document.querySelector('#name');
		const phoneForm = document.querySelector('#number');
		const birthForm = document.querySelector('#birthday');
		const genderForm = document.querySelector('#gender');
			
		const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};
		const username = localStorage.getItem("loggedInUser") || '';

		if (userInfo.hasOwnProperty(username)) {
		  const user = userInfo[username];

		  nickForm.value = username;
		  nameForm.value = user.name;
		  phoneForm.value = user.phone;
		  birthForm.value = user.birthDay;
		  genderForm.value = user.gender;
		} else {
		  console.warn(`사용자 정보가 없습니다: '${username}'`);
		}
	
		const btnInfo = document.querySelector('#btn-info');
		
		btnInfo.addEventListener('click', () => {
			console.log("Press Button");
			
			// 1. 현재 userInfo를 가져와서
			let userInfo = JSON.parse(localStorage.getItem("userInfo")) || {}; // 없을 경우 빈 객체

			// 현재 입력된 닉네임(사용자명)
			const username = nickForm.value;

			// 2. 닉네임을 가지고 있는지 확인하고
			if (userInfo.hasOwnProperty(username)) {
			  // 3-1. 있다면 해당 정보 수정
			  userInfo[username].name = nameForm.value;
			  userInfo[username].phone = phoneForm.value;
			  userInfo[username].birthDay = birthForm.value;
			  userInfo[username].gender = genderForm.value;
			} else {
			  // 3-2. 없다면 새로 추가
			  userInfo[username] = {
			    name: nameForm.value,
			    phone: phoneForm.value,
			    birthDay: birthForm.value,
			    gender: genderForm.value
			  };
			}
			
			if (confirm("사용자 정보를 수정하시겠습니까?")) {
				// 변경된 정보 localStorage에 저장
				localStorage.setItem("userInfo", JSON.stringify(userInfo));
				alert("사용자 정보가 수정되었습니다.");
			} else {
				return;
			}			
		});
	});
	</script>
	
	<!-- 최근에 본 게스트하우스 관련 코드 -->
	<script>
	const html = `<div class="recent-component">
				        <img class="recent-component-img" alt="" src="./img/mypage/img01-01.png">
						<div class="recent-content">
							<p class="recent-title" style="margin-top: 10px;">별자리 여관</p>
							<button class="favorite-btn">
								<i class="far fa-star"></i>
							</button>
						</div>
					</div>`
	</script>
</body>

</html>